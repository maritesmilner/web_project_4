!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(0);class s{constructor(e,t,r,s){this._placeName=e,this._imageURL=t,this._templateSelector=r,this._handleCardClick=s,this._card=this._setCard()}_handleLikeEvent(e){e.target.classList.toggle("heart-button_active")}_handleDeleteEvent(){this._card.remove(),this._card=null}_getCardTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".place").cloneNode(!0)}_setEventListeners(){this._card.querySelector(".heart-button").addEventListener("click",e=>{this._handleLikeEvent(e)}),this._card.querySelector(".trash-button").addEventListener("click",()=>{this._handleDeleteEvent()}),this._card.querySelector(".place__picture").addEventListener("click",()=>{this._handleCardClick(this._card)})}_setCard(){this._card=this._getCardTemplate();const e=this._card.querySelector(".place__picture");return e.src=this._imageURL,e.alt="Picture of "+this._placeName,this._card.querySelector(".place__name").textContent=this._placeName,this._setEventListeners(),this._card}getCard(){return this._card}}class n{constructor(e){this._selector=e,this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".form__close-button"),this._saveButton=this._popup.querySelector(".form__save-button"),this._overlayElement=this._popup.querySelector(".overlay"),this._closeHandler=()=>{this.close()},this._escapeHandler=e=>{"Escape"===e.key&&this.close()}}open(){this._popup.classList.toggle("hide")}close(){this._closeButton.removeEventListener("click",this._closeHandler),document.removeEventListener("keyup",this._escapeHandler),this._popup.classList.toggle("hide")}setEventListeners(){this._closeButton.addEventListener("click",this._closeHandler),document.addEventListener("keyup",this._escapeHandler)}getPopup(){return this._popup}getCloseButton(){return this._closeButton}getSaveButton(){return this._saveButton}getOverlayElement(){return this._overlayElement}}class i extends n{constructor(e,t){super(e),this._handleFormSubmit=t,this._popupForm=super.getPopup().querySelector(".form")}_getInputValues(){return this._inputList=this._popupForm.querySelectorAll(".form__input"),this._formValues={},this._inputList.forEach(e=>{this._formValues[e.name]=e.value}),this._formValues}_resetForm(){this._popupForm.reset(),super.getSaveButton().classList.add("form__save-button_disabled"),super.getSaveButton().disabled=!0}_setEventListeners(){this._submitHandler=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._resetForm(),this._close()},this._popupForm.addEventListener("submit",this._submitHandler),super.setEventListeners()}_close(){this._popupForm.removeEventListener("submit",this._submitHandler),super.close()}open(){this._setEventListeners(),super.open()}}class o{constructor({submitButtonSelector:e,inputSelector:t,inputErrorClass:r,errorClass:s,inactiveButtonClass:n},i){this._formElement=i,this._submitButtonElement=this._formElement.querySelector(e),this._inputSelector=t,this._inputErrorClass=r,this._errorClass=s,this._inactiveButtonClass=n}_hasInvalidInput(e){return e.some(e=>!e.validity.valid)}_toggleSubmitButtonState(e){this._hasInvalidInput(e)?(this._submitButtonElement.classList.add(this._inactiveButtonClass),this._submitButtonElement.disabled=!0):(this._submitButtonElement.classList.remove(this._inactiveButtonClass),this._submitButtonElement.disabled=!1)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){const e=[...this._formElement.querySelectorAll(this._inputSelector)];e.forEach(t=>{t.addEventListener("input",()=>{this._checkInputValidity(t),this._toggleSubmitButtonState(e)})})}}const l=document.querySelector(".content"),a=l.querySelector(".edit-button"),u=l.querySelector(".edit-profile-form"),c=u.querySelector(".form__input_type_name"),_=u.querySelector(".form__input_type_title"),p=l.querySelector(".add-button");const h=new class extends n{constructor(e){super(e),this._overlayHandler=()=>{this._close()}}_close(){super.getOverlayElement().removeEventListener("click",this._overlayHandler),super.close()}_setEventListeners(){super.getOverlayElement().addEventListener("click",this._overlayHandler),super.setEventListeners()}_populatePopup(e){const t=super.getPopup(),r=t.querySelector(".form__pic");r.src=e.querySelector(".place__picture").src,r.alt=e.querySelector(".place__picture").alt;t.querySelector(".form__pic-name").textContent=e.querySelector(".place__name").textContent}open(e){this._populatePopup(e),this._setEventListeners(),super.open()}}(".place-popup"),d=e=>{h.open(e)},m=new class{constructor({items:e,renderer:t},r){this._renderedItems=e,this._renderer=t,this._container=document.querySelector(r)}appendItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}clear(){this._container.innerHTML=""}renderItems(){this.clear(),this._renderedItems.forEach(e=>{this._renderer(e)})}}({items:[],renderer:({name:e,link:t})=>{const r=new s(e,t,".place-template",d);m.appendItem(r.getCard())}},".places");m.renderItems();const v=new i(".new-place-form",({name:e,link:t})=>{const r=new s(e,t,".place-template",d);m.prependItem(r.getCard())});p.addEventListener("click",()=>{v.open()});const f=new class{constructor(e,t){this._nameELement=document.querySelector(e),this._titleElement=document.querySelector(t),this._name=this._nameELement.textContent,this._title=this._titleElement.textContent}getUserInfo(){return{name:this._name,title:this._title}}setUserInfo(e,t){this._name=e,this._title=t,this._nameELement.textContent=e,this._titleElement.textContent=t}}(".profile__name",".profile__title"),y=new i(".edit-profile-form",({name:e,title:t})=>{f.setUserInfo(e,t)});a.addEventListener("click",()=>{const e=f.getUserInfo();c.value=e.name,_.value=e.title,y.open()});[...document.querySelectorAll(".form")].filter(e=>!e.classList.contains("form_display_pic")).forEach(e=>{new o({submitButtonSelector:".form__save-button",inputSelector:".form__input",inputErrorClass:"form__input_type_error-indicator",errorClass:"form__input-error-msg",inactiveButtonClass:"form__save-button_disabled"},e).enableValidation()})}]);